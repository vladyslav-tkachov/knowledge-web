<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Knowledge Web - MongoDB guide</title>
  <link rel="stylesheet" href="../css/guide.css">
  <link rel="shortcut icon" href="../assets/images/web_icon/website_icon.png" type="image/x-icon">

</head>

<body id="preview">
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="navbar-container">
      <ul class="nav-links">
        <li><a href="../index.html" class="nav-item">Home</a></li>
        <li><a href="../html/mini_guides_languages.html" class="nav-item">Languages</a></li>
        <li><a href="../html/mini_guides.html" class="nav-item">General</a></li>
        <li><a href="../html/mini_guides_rpa.html" class="nav-item">RPA</a></li>
        <!-- <li><a href="./html/projects.html" class="nav-item">Projects</a></li>
                                <li><a href="./html/bobbles.html" class="nav-item">Bobbles</a></li> -->
      </ul>
      <!-- Dark Mode Button -->
      <div class="dark-mode-toggle">
        <button id="dark-mode-btn">üåô Dark Mode</button>
      </div>
    </div>
  </nav>
  <h1 class="code-line" data-line-start=0 data-line-end=1><a id="MongoDB_Query_Language_MQL_0"></a>MongoDB Query
    Language (MQL)</h1>
  <p class="has-line-data" data-line-start="1" data-line-end="2">Is the syntax used to interact with MongoDB. It is
    similar to JSON and JavaScript-like in its structure, which makes it straightforward for developers familiar with
    JSON or JavaScript.</p>
  <h2 class="code-line" data-line-start=3 data-line-end=4><a id="1_Connect_to_a_MongoDB_Database_3"></a><strong>1.
      Connect to a MongoDB Database</strong></h2>
  <h3 class="code-line" data-line-start=4 data-line-end=5><a id="Switch_to_a_Database_4"></a><strong>Switch to a
      Database</strong></h3>
  <pre><code class="has-line-data" data-line-start="6" data-line-end="8" class="language-javascript">use database_name
</code></pre>
  <h3 class="code-line" data-line-start=9 data-line-end=10><a id="Show_All_Databases_9"></a><strong>Show All
      Databases</strong></h3>
  <pre><code class="has-line-data" data-line-start="11" data-line-end="13" class="language-javascript">show dbs
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=16 data-line-end=17><a id="2_Basic_CRUD_Operations_16"></a><strong>2. Basic CRUD
      Operations</strong></h2>
  <h3 class="code-line" data-line-start=17 data-line-end=18><a id="Create_Insert_Data_17"></a><strong>Create (Insert
      Data)</strong></h3>
  <p class="has-line-data" data-line-start="18" data-line-end="19">Insert a document into a collection:</p>
  <pre><code class="has-line-data" data-line-start="20" data-line-end="22" class="language-javascript">db.collection_name.insertOne({ name: <span class="hljs-string">"Alice"</span>, age: <span class="hljs-number">25</span> })
</code></pre>
  <p class="has-line-data" data-line-start="23" data-line-end="24">Insert multiple documents:</p>
  <pre><code class="has-line-data" data-line-start="25" data-line-end="30" class="language-javascript">db.collection_name.insertMany([
  { name: <span class="hljs-string">"Bob"</span>, age: <span class="hljs-number">30</span> },
  { name: <span class="hljs-string">"Charlie"</span>, age: <span class="hljs-number">35</span> }
])
</code></pre>
  <hr>
  <h3 class="code-line" data-line-start=33 data-line-end=34><a id="Read_Query_Data_33"></a><strong>Read (Query
      Data)</strong></h3>
  <h4 class="code-line" data-line-start=35 data-line-end=36><a id="Get_All_Documents_35"></a>Get All Documents</h4>
  <pre><code class="has-line-data" data-line-start="37" data-line-end="39" class="language-javascript">db.collection_name.find()
</code></pre>
  <h4 class="code-line" data-line-start=40 data-line-end=41><a id="Find_Documents_Matching_a_Condition_40"></a>Find
    Documents Matching a Condition</h4>
  <pre><code class="has-line-data" data-line-start="42" data-line-end="44" class="language-javascript">db.collection_name.find({ age: <span class="hljs-number">30</span> })
</code></pre>
  <h4 class="code-line" data-line-start=45 data-line-end=46><a
      id="Find_with_Projection_Select_Specific_Fields_45"></a>Find with Projection (Select Specific Fields)</h4>
  <pre><code class="has-line-data" data-line-start="47" data-line-end="49" class="language-javascript">db.collection_name.find({ age: { $gte: <span class="hljs-number">30</span> } }, { name: <span class="hljs-number">1</span>, _id: <span class="hljs-number">0</span> })
</code></pre>
  <ul>
    <li class="has-line-data" data-line-start="49" data-line-end="50"><code>{ $gte: 30 }</code>: Matches
      <code>age &gt;= 30</code>.
    </li>
    <li class="has-line-data" data-line-start="50" data-line-end="52"><code>{ name: 1, _id: 0 }</code>: Return only the
      <code>name</code> field (1 = include, 0 = exclude).
    </li>
  </ul>
  <h4 class="code-line" data-line-start=52 data-line-end=53><a id="Find_One_Document_52"></a>Find One Document</h4>
  <pre><code class="has-line-data" data-line-start="54" data-line-end="56" class="language-javascript">db.collection_name.findOne({ name: <span class="hljs-string">"Alice"</span> })
</code></pre>
  <hr>
  <h3 class="code-line" data-line-start=59 data-line-end=60><a id="Update_Modify_Data_59"></a><strong>Update (Modify
      Data)</strong></h3>
  <h4 class="code-line" data-line-start=61 data-line-end=62><a id="Update_One_Document_61"></a>Update One Document</h4>
  <pre><code class="has-line-data" data-line-start="63" data-line-end="68" class="language-javascript">db.collection_name.updateOne(
  { name: <span class="hljs-string">"Alice"</span> },  <span class="hljs-comment">// Filter</span>
  { $set: { age: <span class="hljs-number">26</span> } }  <span class="hljs-comment">// Update</span>
)
</code></pre>
  <h4 class="code-line" data-line-start=69 data-line-end=70><a id="Update_Multiple_Documents_69"></a>Update Multiple
    Documents</h4>
  <pre><code class="has-line-data" data-line-start="71" data-line-end="76" class="language-javascript">db.collection_name.updateMany(
  { age: { $lt: <span class="hljs-number">30</span> } },  <span class="hljs-comment">// Filter</span>
  { $set: { status: <span class="hljs-string">"young"</span> } }  <span class="hljs-comment">// Update</span>
)
</code></pre>
  <h4 class="code-line" data-line-start=77 data-line-end=78><a
      id="Replace_a_Document_Overwrites_Entire_Document_77"></a>Replace a Document (Overwrites Entire Document)</h4>
  <pre><code class="has-line-data" data-line-start="79" data-line-end="84" class="language-javascript">db.collection_name.replaceOne(
  { name: <span class="hljs-string">"Alice"</span> },  <span class="hljs-comment">// Filter</span>
  { name: <span class="hljs-string">"Alice"</span>, age: <span class="hljs-number">27</span>, city: <span class="hljs-string">"NYC"</span> }  <span class="hljs-comment">// New Document</span>
)
</code></pre>
  <hr>
  <h3 class="code-line" data-line-start=87 data-line-end=88><a id="Delete_Remove_Data_87"></a><strong>Delete (Remove
      Data)</strong></h3>
  <h4 class="code-line" data-line-start=89 data-line-end=90><a id="Delete_One_Document_89"></a>Delete One Document</h4>
  <pre><code class="has-line-data" data-line-start="91" data-line-end="93" class="language-javascript">db.collection_name.deleteOne({ name: <span class="hljs-string">"Bob"</span> })
</code></pre>
  <h4 class="code-line" data-line-start=94 data-line-end=95><a id="Delete_Multiple_Documents_94"></a>Delete Multiple
    Documents</h4>
  <pre><code class="has-line-data" data-line-start="96" data-line-end="98" class="language-javascript">db.collection_name.deleteMany({ age: { $gte: <span class="hljs-number">30</span> } })
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=101 data-line-end=102><a id="3_Query_Operators_101"></a><strong>3. Query
      Operators</strong></h2>
  <p class="has-line-data" data-line-start="102" data-line-end="103">These operators are used in the query object to
    filter data.</p>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th><strong>Operator</strong></th>
        <th><strong>Description</strong></th>
        <th><strong>Example</strong></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>$eq</code></td>
        <td>Equal</td>
        <td><code>{ age: { $eq: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$ne</code></td>
        <td>Not equal</td>
        <td><code>{ age: { $ne: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$gt</code></td>
        <td>Greater than</td>
        <td><code>{ age: { $gt: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$gte</code></td>
        <td>Greater than or equal</td>
        <td><code>{ age: { $gte: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$lt</code></td>
        <td>Less than</td>
        <td><code>{ age: { $lt: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$lte</code></td>
        <td>Less than or equal</td>
        <td><code>{ age: { $lte: 25 } }</code></td>
      </tr>
      <tr>
        <td><code>$in</code></td>
        <td>Matches any value in array</td>
        <td><code>{ age: { $in: [25, 30, 35] } }</code></td>
      </tr>
      <tr>
        <td><code>$nin</code></td>
        <td>Does not match any value in array</td>
        <td><code>{ age: { $nin: [25, 30] } }</code></td>
      </tr>
    </tbody>
  </table>
  <hr>
  <h2 class="code-line" data-line-start=117 data-line-end=118><a id="4_Advanced_Queries_117"></a><strong>4. Advanced
      Queries</strong></h2>
  <h4 class="code-line" data-line-start=119 data-line-end=120><a id="Logical_Operators_119"></a>Logical Operators</h4>
  <ul>
    <li class="has-line-data" data-line-start="120" data-line-end="121"><code>$and</code>: Matches all conditions.</li>
    <li class="has-line-data" data-line-start="121" data-line-end="122"><code>$or</code>: Matches any condition.</li>
    <li class="has-line-data" data-line-start="122" data-line-end="124"><code>$not</code>: Negates a condition.</li>
  </ul>
  <p class="has-line-data" data-line-start="124" data-line-end="125">Example:</p>
  <pre><code class="has-line-data" data-line-start="126" data-line-end="130" class="language-javascript">db.collection_name.find({
  $or: [{ age: { $lt: <span class="hljs-number">30</span> } }, { name: <span class="hljs-string">"Charlie"</span> }]
})
</code></pre>
  <hr>
  <h4 class="code-line" data-line-start=133 data-line-end=134><a id="Nested_Documents_133"></a>Nested Documents</h4>
  <p class="has-line-data" data-line-start="134" data-line-end="135">Query inside nested fields:</p>
  <pre><code class="has-line-data" data-line-start="136" data-line-end="138" class="language-javascript">db.collection_name.find({ <span class="hljs-string">"address.city"</span>: <span class="hljs-string">"New York"</span> })
</code></pre>
  <hr>
  <h4 class="code-line" data-line-start=141 data-line-end=142><a id="Array_Queries_141"></a>Array Queries</h4>
  <p class="has-line-data" data-line-start="142" data-line-end="143">Find documents where an array contains a value:</p>
  <pre><code class="has-line-data" data-line-start="144" data-line-end="146" class="language-javascript">db.collection_name.find({ hobbies: <span class="hljs-string">"reading"</span> })
</code></pre>
  <p class="has-line-data" data-line-start="147" data-line-end="148">Find documents where an array contains multiple
    values:</p>
  <pre><code class="has-line-data" data-line-start="149" data-line-end="151" class="language-javascript">db.collection_name.find({ hobbies: { $all: [<span class="hljs-string">"reading"</span>, <span class="hljs-string">"coding"</span>] } })
</code></pre>
  <p class="has-line-data" data-line-start="152" data-line-end="153">Find documents where an array has a specific size:
  </p>
  <pre><code class="has-line-data" data-line-start="154" data-line-end="156" class="language-javascript">db.collection_name.find({ hobbies: { $size: <span class="hljs-number">2</span> } })
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=159 data-line-end=160><a id="5_Aggregation_Framework_159"></a><strong>5.
      Aggregation Framework</strong></h2>
  <p class="has-line-data" data-line-start="160" data-line-end="161">Use for advanced data manipulation and analysis.
  </p>
  <h4 class="code-line" data-line-start=162 data-line-end=163><a id="Example_Group_and_Count_162"></a>Example: Group and
    Count</h4>
  <pre><code class="has-line-data" data-line-start="164" data-line-end="168" class="language-javascript">db.collection_name.aggregate([
  { $group: { _id: <span class="hljs-string">"$age"</span>, count: { $sum: <span class="hljs-number">1</span> } } }
])
</code></pre>
  <h4 class="code-line" data-line-start=169 data-line-end=170><a id="Example_Filter_Project_and_Sort_169"></a>Example:
    Filter, Project, and Sort</h4>
  <pre><code class="has-line-data" data-line-start="171" data-line-end="177" class="language-javascript">db.collection_name.aggregate([
  { $match: { age: { $gte: <span class="hljs-number">25</span> } } },
  { $project: { name: <span class="hljs-number">1</span>, age: <span class="hljs-number">1</span> } },
  { $sort: { age: -<span class="hljs-number">1</span> } }
])
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=180 data-line-end=181><a id="6_Indexing_180"></a><strong>6. Indexing</strong>
  </h2>
  <p class="has-line-data" data-line-start="181" data-line-end="182">Indexes improve query performance.</p>
  <h4 class="code-line" data-line-start=183 data-line-end=184><a id="Create_an_Index_183"></a>Create an Index</h4>
  <pre><code class="has-line-data" data-line-start="185" data-line-end="187" class="language-javascript">db.collection_name.createIndex({ age: <span class="hljs-number">1</span> })  <span class="hljs-comment">// 1 = Ascending, -1 = Descending</span>
</code></pre>
  <h4 class="code-line" data-line-start=188 data-line-end=189><a id="View_Indexes_188"></a>View Indexes</h4>
  <pre><code class="has-line-data" data-line-start="190" data-line-end="192" class="language-javascript">db.collection_name.getIndexes()
</code></pre>
  <h4 class="code-line" data-line-start=193 data-line-end=194><a id="Drop_an_Index_193"></a>Drop an Index</h4>
  <pre><code class="has-line-data" data-line-start="195" data-line-end="197" class="language-javascript">db.collection_name.dropIndex({ age: <span class="hljs-number">1</span> })
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=200 data-line-end=201><a id="7_Common_MongoDB_Commands_200"></a><strong>7.
      Common MongoDB Commands</strong></h2>
  <ul>
    <li class="has-line-data" data-line-start="201" data-line-end="205"><strong>Show Collections</strong>:
      <pre><code class="has-line-data" data-line-start="203" data-line-end="205" class="language-javascript">show collections
</code></pre>
    </li>
    <li class="has-line-data" data-line-start="205" data-line-end="209"><strong>Drop a Collection</strong>:
      <pre><code class="has-line-data" data-line-start="207" data-line-end="209" class="language-javascript">db.collection_name.drop()
</code></pre>
    </li>
    <li class="has-line-data" data-line-start="209" data-line-end="214"><strong>Drop a Database</strong>:
      <pre><code class="has-line-data" data-line-start="211" data-line-end="213" class="language-javascript">db.dropDatabase()
</code></pre>
    </li>
  </ul>
  <hr>
  <h2 class="code-line" data-line-start=216 data-line-end=217><a id="8_Advanced_Aggregation_216"></a><strong>8. Advanced
      Aggregation</strong></h2>
  <h3 class="code-line" data-line-start=218 data-line-end=219><a id="Pipeline_Stages_218"></a><strong>Pipeline
      Stages</strong></h3>
  <ol>
    <li class="has-line-data" data-line-start="220" data-line-end="221"><strong><code>$match</code></strong>: Filters
      data.</li>
    <li class="has-line-data" data-line-start="221" data-line-end="222"><strong><code>$group</code></strong>: Groups
      data by a field and applies aggregations.</li>
    <li class="has-line-data" data-line-start="222" data-line-end="223"><strong><code>$sort</code></strong>: Orders the
      results.</li>
    <li class="has-line-data" data-line-start="223" data-line-end="224"><strong><code>$project</code></strong>:
      Includes/excludes specific fields.</li>
    <li class="has-line-data" data-line-start="224" data-line-end="226"><strong><code>$lookup</code></strong>: Performs
      a join with another collection.</li>
  </ol>
  <h3 class="code-line" data-line-start=226 data-line-end=227><a
      id="Code_Example_Comprehensive_Aggregation_226"></a><strong>Code Example: Comprehensive Aggregation</strong></h3>
  <pre><code class="has-line-data" data-line-start="228" data-line-end="242" class="language-javascript">db.orders.aggregate([
  { $match: { status: <span class="hljs-string">"shipped"</span> } }, <span class="hljs-comment">// Filter shipped orders</span>
  { $group: { _id: <span class="hljs-string">"$customerId"</span>, totalSpent: { $sum: <span class="hljs-string">"$amount"</span> } } }, <span class="hljs-comment">// Group by customer and sum their spending</span>
  { $sort: { totalSpent: -<span class="hljs-number">1</span> } }, <span class="hljs-comment">// Sort by total spent, descending</span>
  { $limit: <span class="hljs-number">5</span> }, <span class="hljs-comment">// Top 5 customers</span>
  { $lookup: {
      from: <span class="hljs-string">"customers"</span>,
      localField: <span class="hljs-string">"_id"</span>,
      foreignField: <span class="hljs-string">"customerId"</span>,
      <span class="hljs-keyword">as</span>: <span class="hljs-string">"customerDetails"</span>
    }
  } <span class="hljs-comment">// Enrich with customer details</span>
])
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=245 data-line-end=246><a id="9_Transaction_Operations_245"></a><strong>9.
      Transaction Operations</strong></h2>
  <p class="has-line-data" data-line-start="247" data-line-end="248">MongoDB supports multi-document ACID transactions
    in replica sets.</p>
  <h3 class="code-line" data-line-start=249 data-line-end=250><a id="Code_Example_Transactions_249"></a><strong>Code
      Example: Transactions</strong></h3>
  <pre><code class="has-line-data" data-line-start="251" data-line-end="272" class="language-javascript"><span class="hljs-keyword">const</span> session = db.getMongo().startSession();
session.startTransaction();

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> ordersCollection = session.getDatabase(<span class="hljs-string">"store"</span>).orders;
  <span class="hljs-keyword">const</span> inventoryCollection = session.getDatabase(<span class="hljs-string">"store"</span>).inventory;

  ordersCollection.insertOne({ orderId: <span class="hljs-number">1</span>, product: <span class="hljs-string">"Book"</span>, quantity: <span class="hljs-number">1</span> });
  inventoryCollection.updateOne(
    { product: <span class="hljs-string">"Book"</span> },
    { $inc: { stock: -<span class="hljs-number">1</span> } }
  );

  session.commitTransaction();
} <span class="hljs-keyword">catch</span> (error) {
  session.abortTransaction();
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Transaction failed:"</span>, error);
} <span class="hljs-keyword">finally</span> {
  session.endSession();
}
</code></pre>
  <h3 class="code-line" data-line-start=273 data-line-end=274><a id="Key_Concepts_273"></a><strong>Key Concepts</strong>
  </h3>
  <ul>
    <li class="has-line-data" data-line-start="274" data-line-end="275">Transactions ensure data consistency across
      collections.</li>
    <li class="has-line-data" data-line-start="275" data-line-end="277">Use <code>startTransaction()</code> and
      <code>commitTransaction()</code> for atomic operations.
    </li>
  </ul>
  <hr>
  <h2 class="code-line" data-line-start=279 data-line-end=280><a id="10_Advanced_Indexing_279"></a><strong>10. Advanced
      Indexing</strong></h2>
  <h3 class="code-line" data-line-start=281 data-line-end=282><a id="Compound_Index_281"></a><strong>Compound
      Index</strong></h3>
  <pre><code class="has-line-data" data-line-start="283" data-line-end="285" class="language-javascript">db.collection_name.createIndex({ age: <span class="hljs-number">1</span>, name: <span class="hljs-number">1</span> })
</code></pre>
  <ul>
    <li class="has-line-data" data-line-start="285" data-line-end="287">Combines multiple fields into a single index.
    </li>
  </ul>
  <h3 class="code-line" data-line-start=287 data-line-end=288><a id="Text_Index_287"></a><strong>Text Index</strong>
  </h3>
  <pre><code class="has-line-data" data-line-start="289" data-line-end="291" class="language-javascript">db.collection_name.createIndex({ description: <span class="hljs-string">"text"</span> })
</code></pre>
  <ul>
    <li class="has-line-data" data-line-start="291" data-line-end="293">Enables full-text search.</li>
  </ul>
  <h3 class="code-line" data-line-start=293 data-line-end=294><a id="Wildcard_Index_293"></a><strong>Wildcard
      Index</strong></h3>
  <pre><code class="has-line-data" data-line-start="295" data-line-end="297" class="language-javascript">db.collection_name.createIndex({ <span class="hljs-string">"$**"</span>: <span class="hljs-number">1</span> })
</code></pre>
  <ul>
    <li class="has-line-data" data-line-start="297" data-line-end="299">Indexes all fields in a document.</li>
  </ul>
  <h3 class="code-line" data-line-start=299 data-line-end=300><a id="Performance_Insight_299"></a><strong>Performance
      Insight</strong></h3>
  <p class="has-line-data" data-line-start="300" data-line-end="301">Use <code>explain()</code> to analyze query
    performance:</p>
  <pre><code class="has-line-data" data-line-start="302" data-line-end="304" class="language-javascript">db.collection_name.find({ age: <span class="hljs-number">25</span> }).explain(<span class="hljs-string">"executionStats"</span>)
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=307 data-line-end=308><a id="11_FullText_Search_307"></a><strong>11. Full-Text
      Search</strong></h2>
  <h3 class="code-line" data-line-start=309 data-line-end=310><a id="Search_Text_Fields_309"></a><strong>Search Text
      Fields</strong></h3>
  <pre><code class="has-line-data" data-line-start="311" data-line-end="313" class="language-javascript">db.collection_name.find({ $text: { $search: <span class="hljs-string">"apple"</span> } })
</code></pre>
  <h3 class="code-line" data-line-start=314 data-line-end=315><a id="Search_with_Weighting_314"></a><strong>Search with
      Weighting</strong></h3>
  <pre><code class="has-line-data" data-line-start="316" data-line-end="318" class="language-javascript">db.collection_name.createIndex({ title: <span class="hljs-string">"text"</span>, description: <span class="hljs-string">"text"</span> }, { weights: { title: <span class="hljs-number">10</span>, description: <span class="hljs-number">2</span> } })
</code></pre>
  <h3 class="code-line" data-line-start=319 data-line-end=320><a id="Exclude_Irrelevant_Matches_319"></a><strong>Exclude
      Irrelevant Matches</strong></h3>
  <pre><code class="has-line-data" data-line-start="321" data-line-end="323" class="language-javascript">db.collection_name.find({ $text: { $search: <span class="hljs-string">"apple -banana"</span> } })
</code></pre>
  <ul>
    <li class="has-line-data" data-line-start="323" data-line-end="325">Use <code>-</code> to exclude terms.</li>
  </ul>
  <hr>
  <h2 class="code-line" data-line-start=327 data-line-end=328><a id="12_Geospatial_Queries_327"></a><strong>12.
      Geospatial Queries</strong></h2>
  <h3 class="code-line" data-line-start=329 data-line-end=330><a id="Create_a_Geospatial_Index_329"></a><strong>Create a
      Geospatial Index</strong></h3>
  <pre><code class="has-line-data" data-line-start="331" data-line-end="333" class="language-javascript">db.places.createIndex({ location: <span class="hljs-string">"2dsphere"</span> })
</code></pre>
  <h3 class="code-line" data-line-start=334 data-line-end=335><a id="Find_Places_Near_a_Point_334"></a><strong>Find
      Places Near a Point</strong></h3>
  <pre><code class="has-line-data" data-line-start="336" data-line-end="345" class="language-javascript">db.places.find({
  location: {
    $near: {
      $geometry: { type: <span class="hljs-string">"Point"</span>, coordinates: [longitude, latitude] },
      $maxDistance: <span class="hljs-number">1000</span> <span class="hljs-comment">// Meters</span>
    }
  }
})
</code></pre>
  <h3 class="code-line" data-line-start=346 data-line-end=347><a id="Find_Places_Within_a_Polygon_346"></a><strong>Find
      Places Within a Polygon</strong></h3>
  <pre><code class="has-line-data" data-line-start="348" data-line-end="359" class="language-javascript">db.places.find({
  location: {
    $geoWithin: {
      $geometry: {
        type: <span class="hljs-string">"Polygon"</span>,
        coordinates: [[[lng1, lat1], [lng2, lat2], [lng3, lat3], [lng1, lat1]]]
      }
    }
  }
})
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=362 data-line-end=363><a id="13_Array_Operations_362"></a><strong>13. Array
      Operations</strong></h2>
  <h3 class="code-line" data-line-start=364 data-line-end=365><a
      id="Update_Specific_Array_Elements_364"></a><strong>Update Specific Array Elements</strong></h3>
  <pre><code class="has-line-data" data-line-start="366" data-line-end="371" class="language-javascript">db.collection_name.updateOne(
  { _id: <span class="hljs-number">1</span>, <span class="hljs-string">"items.name"</span>: <span class="hljs-string">"apple"</span> },
  { $set: { <span class="hljs-string">"items.$.quantity"</span>: <span class="hljs-number">5</span> } }
)
</code></pre>
  <h3 class="code-line" data-line-start=372 data-line-end=373><a id="Add_Elements_to_an_Array_372"></a><strong>Add
      Elements to an Array</strong></h3>
  <pre><code class="has-line-data" data-line-start="374" data-line-end="379" class="language-javascript">db.collection_name.updateOne(
  { _id: <span class="hljs-number">1</span> },
  { $push: { tags: <span class="hljs-string">"newTag"</span> } }
)
</code></pre>
  <h3 class="code-line" data-line-start=380 data-line-end=381><a
      id="Remove_Specific_Array_Elements_380"></a><strong>Remove Specific Array Elements</strong></h3>
  <pre><code class="has-line-data" data-line-start="382" data-line-end="387" class="language-javascript">db.collection_name.updateOne(
  { _id: <span class="hljs-number">1</span> },
  { $pull: { tags: <span class="hljs-string">"obsoleteTag"</span> } }
)
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=390 data-line-end=391><a id="14_Data_Validation_390"></a><strong>14. Data
      Validation</strong></h2>
  <h3 class="code-line" data-line-start=392 data-line-end=393><a id="Define_a_Validation_Schema_392"></a><strong>Define
      a Validation Schema</strong></h3>
  <pre><code class="has-line-data" data-line-start="394" data-line-end="414" class="language-javascript">db.createCollection(<span class="hljs-string">"products"</span>, {
  validator: {
    $jsonSchema: {
      bsonType: <span class="hljs-string">"object"</span>,
      required: [<span class="hljs-string">"name"</span>, <span class="hljs-string">"price"</span>],
      properties: {
        name: {
          bsonType: <span class="hljs-string">"string"</span>,
          description: <span class="hljs-string">"must be a string and is required"</span>
        },
        price: {
          bsonType: <span class="hljs-string">"double"</span>,
          minimum: <span class="hljs-number">0</span>,
          description: <span class="hljs-string">"must be a double and is required"</span>
        }
      }
    }
  }
})
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=417 data-line-end=418><a id="15_Change_Streams_417"></a><strong>15. Change
      Streams</strong></h2>
  <p class="has-line-data" data-line-start="419" data-line-end="420">Track real-time changes to your collections.</p>
  <h3 class="code-line" data-line-start=421 data-line-end=422><a id="Code_Example_Watch_Changes_421"></a><strong>Code
      Example: Watch Changes</strong></h3>
  <pre><code class="has-line-data" data-line-start="423" data-line-end="429" class="language-javascript"><span class="hljs-keyword">const</span> changeStream = db.collection_name.watch();

changeStream.on(<span class="hljs-string">"change"</span>, (change) =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Change detected:"</span>, change);
});
</code></pre>
  <h3 class="code-line" data-line-start=430 data-line-end=431><a id="Key_Concepts_430"></a><strong>Key Concepts</strong>
  </h3>
  <ul>
    <li class="has-line-data" data-line-start="431" data-line-end="433">Use for real-time applications like
      notifications.</li>
  </ul>
  <hr>
  <h2 class="code-line" data-line-start=435 data-line-end=436><a id="16_Backups_and_Restores_435"></a><strong>16.
      Backups and Restores</strong></h2>
  <h3 class="code-line" data-line-start=437 data-line-end=438><a id="Backup_Database_437"></a><strong>Backup
      Database</strong></h3>
  <pre><code class="has-line-data" data-line-start="439" data-line-end="441" class="language-bash">mongodump --db database_name --out /backup/directory
</code></pre>
  <h3 class="code-line" data-line-start=442 data-line-end=443><a id="Restore_Database_442"></a><strong>Restore
      Database</strong></h3>
  <pre><code class="has-line-data" data-line-start="444" data-line-end="446" class="language-bash">mongorestore --db database_name /backup/directory/database_name
</code></pre>
  <hr>
  <h2 class="code-line" data-line-start=449 data-line-end=450><a id="17_Security_Best_Practices_449"></a><strong>17.
      Security Best Practices</strong></h2>
  <ol>
    <li class="has-line-data" data-line-start="451" data-line-end="455">
      <p class="has-line-data" data-line-start="451" data-line-end="452"><strong>Enable Authentication</strong>:</p>
      <pre><code class="has-line-data" data-line-start="453" data-line-end="455" class="language-bash">mongod --auth
</code></pre>
    </li>
    <li class="has-line-data" data-line-start="455" data-line-end="464">
      <p class="has-line-data" data-line-start="455" data-line-end="456"><strong>Create Users with Roles</strong>:</p>
      <pre><code class="has-line-data" data-line-start="457" data-line-end="463" class="language-javascript">db.createUser({
  user: <span class="hljs-string">"admin"</span>,
  pwd: <span class="hljs-string">"password"</span>,
  roles: [{ role: <span class="hljs-string">"userAdminAnyDatabase"</span>, db: <span class="hljs-string">"admin"</span> }]
});
</code></pre>
    </li>
    <li class="has-line-data" data-line-start="464" data-line-end="467">
      <p class="has-line-data" data-line-start="464" data-line-end="465"><strong>Limit Network Exposure</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="465" data-line-end="467">Bind MongoDB to specific IPs using
          <code>bindIp</code> in <code>mongod.conf</code>.
        </li>
      </ul>
    </li>
  </ol>
  <hr>
  <h2 class="code-line" data-line-start=469 data-line-end=470><a id="18_Best_Practices_469"></a><strong>18. Best
      Practices</strong></h2>
  <ol>
    <li class="has-line-data" data-line-start="471" data-line-end="474">
      <p class="has-line-data" data-line-start="471" data-line-end="472"><strong>Use Proper Indexing</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="472" data-line-end="474">Analyze slow queries with
          <code>db.currentOp()</code> and create indexes accordingly.
        </li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="474" data-line-end="477">
      <p class="has-line-data" data-line-start="474" data-line-end="475"><strong>Sharding for Scalability</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="475" data-line-end="477">Split data across multiple shards for large
          datasets.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="477" data-line-end="480">
      <p class="has-line-data" data-line-start="477" data-line-end="478"><strong>Avoid Large Documents</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="478" data-line-end="480">MongoDB has a 16MB document size limit.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="480" data-line-end="486">
      <p class="has-line-data" data-line-start="480" data-line-end="481"><strong>Enable Write Concern</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="481" data-line-end="486">Ensure data integrity with write
          acknowledgment:
          <pre><code class="has-line-data" data-line-start="483" data-line-end="485" class="language-javascript">db.collection_name.insertOne({ key: <span class="hljs-string">"value"</span> }, { writeConcern: { w: <span class="hljs-number">1</span> } });
</code></pre>
        </li>
      </ul>
    </li>
  </ol>
  <hr>
  <h2 class="code-line" data-line-start=488 data-line-end=489><a id="Resources_488"></a><strong>Resources</strong></h2>
  <ol>
    <li class="has-line-data" data-line-start="490" data-line-end="491"><a href="https://www.mongodb.com/docs/">MongoDB
        Documentation</a></li>
    <li class="has-line-data" data-line-start="491" data-line-end="492"><a
        href="https://university.mongodb.com/">MongoDB University</a></li>
    <li class="has-line-data" data-line-start="492" data-line-end="494"><a
        href="https://www.mongodb.com/docs/manual/reference/command/">MQL Reference Guide</a></li>
  </ol>
  <hr>
  <h1 class="code-line" data-line-start=495 data-line-end=496><a id="Comparison_Of_SQL_To_MongoDB_495"></a>Comparison Of
    SQL To MongoDB</h1>
  <p class="has-line-data" data-line-start="496" data-line-end="497">When comparing <strong>SQL (relational
      databases)</strong> and <strong>MongoDB (a NoSQL database)</strong>, it largely depends on your specific use case,
    the type of data you‚Äôre working with, and the skills of your team. Both have their strengths and weaknesses, so
    let‚Äôs break it down to help you understand which might be better or easier for your needs.</p>
  <hr>
  <h3 class="code-line" data-line-start=500 data-line-end=501><a id="1_What_is_SQL_500"></a><strong>1. What is
      SQL?</strong></h3>
  <p class="has-line-data" data-line-start="501" data-line-end="502">SQL databases are <strong>relational
      databases</strong> that organize data into tables with rows and columns, and relationships between data are
    defined explicitly (e.g., foreign keys). Examples include:</p>
  <ul>
    <li class="has-line-data" data-line-start="502" data-line-end="503">MySQL</li>
    <li class="has-line-data" data-line-start="503" data-line-end="504">PostgreSQL</li>
    <li class="has-line-data" data-line-start="504" data-line-end="505">Microsoft SQL Server</li>
    <li class="has-line-data" data-line-start="505" data-line-end="507">SQLite</li>
  </ul>
  <h3 class="code-line" data-line-start=507 data-line-end=508><a id="2_What_is_MongoDB_507"></a><strong>2. What is
      MongoDB?</strong></h3>
  <p class="has-line-data" data-line-start="508" data-line-end="509">MongoDB is a <strong>NoSQL database</strong> that
    stores data in a flexible, JSON-like format (called BSON). It is schema-less, meaning you don‚Äôt have to define a
    rigid structure for your data.</p>
  <hr>
  <h3 class="code-line" data-line-start=512 data-line-end=513><a id="Key_Differences_512"></a><strong>Key
      Differences:</strong></h3>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th><strong>Aspect</strong></th>
        <th><strong>SQL (Relational Databases)</strong></th>
        <th><strong>MongoDB (NoSQL Database)</strong></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Data Structure</strong></td>
        <td>Fixed schema with tables, rows, and columns. Relationships between tables are explicitly defined.</td>
        <td>Flexible schema with JSON-like documents (BSON), suitable for semi-structured or unstructured data.</td>
      </tr>
      <tr>
        <td><strong>Relationships</strong></td>
        <td>Strongly supports complex relationships using joins and foreign keys.</td>
        <td>Stores data as embedded documents, reducing the need for joins but making relationships less explicit.</td>
      </tr>
      <tr>
        <td><strong>Scalability</strong></td>
        <td>Vertically scalable (adding more power to a single server).</td>
        <td>Horizontally scalable (easily adds more servers).</td>
      </tr>
      <tr>
        <td><strong>Ease of Use</strong></td>
        <td>Requires designing and maintaining a schema, but querying with SQL is widely understood.</td>
        <td>Easier to start with because of its schema-less nature, but querying requires learning MongoDB syntax.</td>
      </tr>
      <tr>
        <td><strong>Performance</strong></td>
        <td>Best for structured, predictable data and complex queries.</td>
        <td>Better for high write/read loads and large volumes of unstructured or semi-structured data.</td>
      </tr>
      <tr>
        <td><strong>Query Language</strong></td>
        <td>Standard SQL, familiar and widely used.</td>
        <td>MongoDB Query Language (MQL), uses JSON-like syntax, simpler for some tasks.</td>
      </tr>
      <tr>
        <td><strong>Flexibility</strong></td>
        <td>Less flexible because of rigid schema requirements.</td>
        <td>Highly flexible due to its schema-less design, making it ideal for rapidly evolving apps.</td>
      </tr>
      <tr>
        <td><strong>Transaction Support</strong></td>
        <td>Strong ACID compliance for transactional systems like banking, e-commerce, etc.</td>
        <td>Supports transactions but is less mature than relational databases for complex transactions.</td>
      </tr>
      <tr>
        <td><strong>Indexing</strong></td>
        <td>Supports various indexing strategies.</td>
        <td>Also supports indexing but shines with geospatial and other modern types of indexes.</td>
      </tr>
    </tbody>
  </table>
  <hr>
  <h3 class="code-line" data-line-start=528 data-line-end=529><a id="When_to_Use_SQL_528"></a><strong>When to Use
      SQL?</strong></h3>
  <p class="has-line-data" data-line-start="529" data-line-end="530">SQL databases are better when:</p>
  <ol>
    <li class="has-line-data" data-line-start="530" data-line-end="534">
      <p class="has-line-data" data-line-start="530" data-line-end="531"><strong>You Have Structured Data</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="531" data-line-end="532">Data fits neatly into tables with rows and
          columns.</li>
        <li class="has-line-data" data-line-start="532" data-line-end="534">Example: Customer data, order history,
          financial data.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="534" data-line-end="538">
      <p class="has-line-data" data-line-start="534" data-line-end="535"><strong>You Need Relationships</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="535" data-line-end="536">Data has many relationships, like between
          users, orders, and products.</li>
        <li class="has-line-data" data-line-start="536" data-line-end="538">Example: An e-commerce application.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="538" data-line-end="541">
      <p class="has-line-data" data-line-start="538" data-line-end="539"><strong>You Need Transactions</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="539" data-line-end="541">Use cases where data integrity is critical
          (e.g., banking, payment systems).</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="541" data-line-end="544">
      <p class="has-line-data" data-line-start="541" data-line-end="542"><strong>You Need Complex Queries</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="542" data-line-end="544">You rely on joins, aggregations, and other
          advanced SQL features.</li>
      </ul>
    </li>
  </ol>
  <hr>
  <h3 class="code-line" data-line-start=546 data-line-end=547><a id="When_to_Use_MongoDB_546"></a><strong>When to Use
      MongoDB?</strong></h3>
  <p class="has-line-data" data-line-start="547" data-line-end="548">MongoDB is better when:</p>
  <ol>
    <li class="has-line-data" data-line-start="548" data-line-end="552">
      <p class="has-line-data" data-line-start="548" data-line-end="549"><strong>You Have Unstructured or
          Semi-Structured Data</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="549" data-line-end="550">Data can change over time without requiring
          rigid schemas.</li>
        <li class="has-line-data" data-line-start="550" data-line-end="552">Example: Social media profiles, IoT sensor
          data, or dynamic forms.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="552" data-line-end="556">
      <p class="has-line-data" data-line-start="552" data-line-end="553"><strong>You Need Scalability</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="553" data-line-end="554">Applications with high traffic and large
          volumes of data.</li>
        <li class="has-line-data" data-line-start="554" data-line-end="556">Example: Real-time analytics, content
          management systems.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="556" data-line-end="559">
      <p class="has-line-data" data-line-start="556" data-line-end="557"><strong>Your Schema Evolves
          Frequently</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="557" data-line-end="559">MongoDB‚Äôs schema-less nature is great for
          projects where the data model changes frequently.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="559" data-line-end="562">
      <p class="has-line-data" data-line-start="559" data-line-end="560"><strong>Speed and Simplicity</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="560" data-line-end="562">You need fast prototyping and development,
          especially for agile projects.</li>
      </ul>
    </li>
  </ol>
  <hr>
  <h3 class="code-line" data-line-start=564 data-line-end=565><a id="Ease_of_Use_SQL_vs_MongoDB_564"></a><strong>Ease of
      Use: SQL vs MongoDB</strong></h3>
  <ul>
    <li class="has-line-data" data-line-start="565" data-line-end="570">
      <p class="has-line-data" data-line-start="565" data-line-end="566"><strong>SQL</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="566" data-line-end="567">Easier if you have structured data and are
          already familiar with SQL syntax.</li>
        <li class="has-line-data" data-line-start="567" data-line-end="568">Many developers already know SQL, making
          onboarding easier.</li>
        <li class="has-line-data" data-line-start="568" data-line-end="570">Complex queries can be more straightforward
          with SQL.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="570" data-line-end="574">
      <p class="has-line-data" data-line-start="570" data-line-end="571"><strong>MongoDB</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="571" data-line-end="572">Easier for handling dynamic or
          semi-structured data since you don‚Äôt need to design schemas upfront.</li>
        <li class="has-line-data" data-line-start="572" data-line-end="574">The JSON-like query syntax can be more
          intuitive for developers used to working with JavaScript or modern web development.</li>
      </ul>
    </li>
  </ul>
  <hr>
  <h3 class="code-line" data-line-start=576 data-line-end=577><a id="Which_is_Better_576"></a><strong>Which is
      Better?</strong></h3>
  <ul>
    <li class="has-line-data" data-line-start="577" data-line-end="582">
      <p class="has-line-data" data-line-start="577" data-line-end="578"><strong>Go with SQL if</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="578" data-line-end="579">Your data is structured and relationships
          are important.</li>
        <li class="has-line-data" data-line-start="579" data-line-end="580">You need ACID compliance for strict
          transactional requirements.</li>
        <li class="has-line-data" data-line-start="580" data-line-end="582">You‚Äôre dealing with well-understood, stable
          datasets.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="582" data-line-end="587">
      <p class="has-line-data" data-line-start="582" data-line-end="583"><strong>Go with MongoDB if</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="583" data-line-end="584">Your data is unstructured, semi-structured,
          or frequently changing.</li>
        <li class="has-line-data" data-line-start="584" data-line-end="585">You need high scalability and flexibility
          for large-scale applications.</li>
        <li class="has-line-data" data-line-start="585" data-line-end="587">You prioritize speed and simplicity over
          strict schema enforcement.</li>
      </ul>
    </li>
  </ul>
  <hr>
  <h3 class="code-line" data-line-start=589 data-line-end=590><a id="RealWorld_Example_589"></a><strong>Real-World
      Example</strong></h3>
  <ul>
    <li class="has-line-data" data-line-start="590" data-line-end="594">
      <p class="has-line-data" data-line-start="590" data-line-end="591"><strong>SQL Use Case</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="591" data-line-end="592">A banking application that manages accounts,
          transactions, and balances.</li>
        <li class="has-line-data" data-line-start="592" data-line-end="594">Data integrity and complex relationships are
          key.</li>
      </ul>
    </li>
    <li class="has-line-data" data-line-start="594" data-line-end="597">
      <p class="has-line-data" data-line-start="594" data-line-end="595"><strong>MongoDB Use Case</strong>:</p>
      <ul>
        <li class="has-line-data" data-line-start="595" data-line-end="597">A social media platform where user profiles,
          posts, and interactions are highly dynamic and can change structure over time.</li>
      </ul>
    </li>
  </ul>
  <hr>
  <h3 class="code-line" data-line-start=599 data-line-end=600><a id="Final_Thoughts_599"></a><strong>Final
      Thoughts</strong></h3>
  <p class="has-line-data" data-line-start="600" data-line-end="601">Neither SQL nor MongoDB is universally ‚Äúbetter.‚Äù
    Each excels in specific scenarios. If you‚Äôre using MongoDB already and it works well for your projects, there‚Äôs no
    need to switch. However, if you find MongoDB‚Äôs schema-less nature leading to confusion or inefficiencies, SQL may be
    worth considering.</p>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-left">
      <p>&copy; 2024 Vladyslav Tkachov</p>
    </div>
    <div class="footer-right">
      <a href="https://linkedin.com/in/vladyslav-tkachov" target="_blank" class="footer-link">LinkedIn</a>
      <a href="https://github.com/vladyslav-tkachov" target="_blank" class="footer-link">GitHub</a>
      <a href="mailto:tkachovvladyslav@gmail.com" class="footer-link">Email</a>
    </div>
  </footer>
  <script type="text/javascript" src="../Js/dark-mode.js"></script>

</body>

</html>